---
const links = [
  { link: 'presentation', label: 'Presentación' },
  { link: 'experience', label: 'Experiencia' },
  { link: 'projects', label: 'Proyectos' },
  { link: 'studies', label: 'Estudios' },
  { link: 'certifications', label: 'Certificaciones' },
];
---

<header class="sticky top-2">
  <nav
    class="px-4 flex gap-5 justify-center py-3 my-4 flex-wrap border-r-0 rounded-xl bg-slate-800"
  >
  <a href="#" class="hidden text-blue-500"></a>
    {
      links.map(({ label, link }) => (
        <a
          class="hover:text-blue-500 text-sm"
          href={`#${link}`}
          data-link={`#${link}`}
        >
          {label}
        </a>
      ))
    }
  </nav>
</header>

<script>
  // Seleccionar todas las secciones y enlaces
  const sections = document.querySelectorAll('section');
  const navLinks = document.querySelectorAll('[data-link]');

  console.log(sections);

  // Opciones para el Intersection Observer
  const observerOptions = {
    root: null,
    rootMargin: '-50% 0px', // Ajusta este valor según necesites
    threshold: 0,
  };

  // Crear el observer
  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        console.log(entry);
        // Obtener el id de la sección actual
        const id = `#${entry.target.id}`;

        console.log(id)

        // Actualizar clases de los enlaces
        navLinks.forEach((link) => {
          if (link.getAttribute('data-link') === id) {
            link.classList.add('text-blue-500');
          } else {
            link.classList.remove('text-blue-500');
          }
        });
      }
    });
  }, observerOptions);

  // Observar todas las secciones
  sections.forEach((section) => {
    observer.observe(section);
  });
</script>
